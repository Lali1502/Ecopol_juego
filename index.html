<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLUE: El Misterio del Equilibrio Roto (RETO FINAL)</title>
<style>
body {
    font-family: 'Georgia', serif;
    background-color: #0d1a26;
    color: #f4f4f9;
    margin: 0;
    padding: 0;
}
.container {
    max-width: 800px;
    margin: 40px auto;
    background: #1c2b38;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 25px rgba(255,255,255,0.1);
    min-height: 500px;
}
h1, h2, h3 {
    color: #ffcc00;
    border-bottom: 2px solid #555;
    padding-bottom: 10px;
}
button {
    padding: 15px 30px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background-color: #ffd700;
    color: #333;
    font-weight: bold;
    font-size: 16px;
    margin-top: 15px;
    transition: 0.3s;
}
button:hover {
    background-color: #ffc107;
    transform: scale(1.05);
}
button.comodin {
    background-color: #00796b;
    color: white;
}
button.comodin:hover {
    background-color: #004d40;
}
.inicio-historia {
    text-align: center;
    padding: 50px 20px;
    background-image: url('https://i.imgur.com/f3Gj0t2.png');
    background-size: cover;
    background-position: center;
    border-radius: 8px;
    color: white;
    text-shadow: 1px 1px 5px #000;
}
.pregunta, .error, .status {
    margin-bottom: 20px;
    padding: 15px;
    border-radius: 5px;
}
.pregunta {
    background: #5c6bc0;
    border: 1px solid #9fa8da;
}
.error {
    background: #b71c1c;
    border: 1px solid #ef5350;
}
#output {
    margin-top: 20px;
    padding: 15px;
    background: #263238;
    border-radius: 5px;
    white-space: pre-wrap;
}
</style>
</head>
<body>
<div class="container">
  <div id="status"></div>
  <div id="game-area"></div>
  <div id="output"></div>
</div>

<script>
let comodinesUsados = { smith:false, keynes:false, friedman:false };
let comodinesMapa = {
  'smith':'Adam Smith (Micro)',
  'keynes':'J.M. Keynes (Fiscal)',
  'friedman':'M. Friedman (Monetaria)'
};
let pistasCrimen = {};
let preguntasCrimenRespondidas = 0;
let castigosUsados = [];
let castigoActual = null;
let pistaIndex = 0;
const sospechosos = {
  A:'Dr. Joseph A. Schumpeter (Desenvolvimiento)',
  B:'Profesor Allyn A. Young (Rendimientos)'
};
const preguntasCrimen = [
  { id:'P1', tipo:'Asesino', pregunta:"Se encontr√≥ un texto de la v√≠ctima ridiculizando el desequilibrio cr√≥nico. ¬øA qui√©n incrimina?",
    opciones:{A:sospechosos.A, B:sospechosos.B}, respuestaCorrecta:'B', clave:'ASESINO', valor:'Profesor Allyn A. Young' },
  { id:'P2', tipo:'Arma', pregunta:"La v√≠ctima fue hallada con un gr√°fico de retornos decrecientes. ¬øQu√© representa el arma?",
    opciones:{A:'Competencia perfecta', B:'Rendimientos crecientes'}, respuestaCorrecta:'B', clave:'ARMA', valor:'Rendimientos crecientes' },
  { id:'P3', tipo:'Lugar', pregunta:"El crimen ocurri√≥ donde el equilibrio general no se sosten√≠a. ¬øD√≥nde fue?",
    opciones:{A:'Mercado cerrado', B:'Sistema din√°mico en expansi√≥n'}, respuestaCorrecta:'B', clave:'LUGAR', valor:'Sistema din√°mico en expansi√≥n' },
  { id:'P4', tipo:'M√≥vil', pregunta:"¬øCu√°l fue el motivo del crimen?",
    opciones:{A:'Defensa del equilibrio est√°tico', B:'Progreso econ√≥mico'}, respuestaCorrecta:'B', clave:'MOVIL', valor:'Progreso econ√≥mico' }
];
const bancoCastigos = [
  { id:'C1', tipo:'Microeconom√≠a', pregunta:"¬øQu√© mide la pendiente de la curva de indiferencia?",
    opciones:{E1:'Tasa Marginal de Sustituci√≥n',E2:'Precio Relativo'}, respuestaCorrecta:'E1', comodinRequerido:'smith' },
  { id:'C2', tipo:'Macroeconom√≠a Fiscal', pregunta:"¬øQu√© ocurre si el gasto p√∫blico aumenta con ahorro constante?",
    opciones:{E1:'El ingreso sube',E2:'El ingreso baja'}, respuestaCorrecta:'E1', comodinRequerido:'keynes' },
  { id:'C3', tipo:'Monetaria', pregunta:"¬øQu√© plantea Friedman sobre la inflaci√≥n?",
    opciones:{E1:'Es un fen√≥meno fiscal',E2:'Es siempre y en todo lugar un fen√≥meno monetario'}, respuestaCorrecta:'E2', comodinRequerido:'friedman' }
];
function mostrarHistoria(){
  document.getElementById('game-area').innerHTML=`
    <div class="inicio-historia">
      <h1>CLUE: El Misterio del Equilibrio Roto</h1>
      <p><em>En la Mansi√≥n de la Econom√≠a, el Dr. Equilibrio ha sido asesinado.</em></p>
      <p>Resuelve las pistas y descubre al culpable entre:</p>
      <ul style="text-align:left; max-width:400px; margin:auto; list-style:none;">
        <li><strong>${sospechosos.A}</strong></li>
        <li><strong>${sospechosos.B}</strong></li>
      </ul>
      <button onclick="iniciarJuego()">Iniciar Investigaci√≥n</button>
    </div>`;
  document.getElementById('status').innerHTML='';
  document.getElementById('output').innerHTML='';
}
function iniciarJuego(){ mostrarPreguntaCrimen(0); }
function actualizarStatus(){
  const disp=Object.keys(comodinesUsados).filter(c=>!comodinesUsados[c])
    .map(c=>`<span style="color:#ffcc00">${comodinesMapa[c]}</span>`).join(', ')||'Agotados';
  const pistas=Object.entries(pistasCrimen).map(([k,v])=>`${k}: ${v}`).join('; ')||'Ninguna';
  document.getElementById('status').innerHTML=
    `<h3>Estado</h3><p>Pistas: ${preguntasCrimenRespondidas}/${preguntasCrimen.length}</p>
     <p>${pistas}</p><p>Comodines: ${disp}</p>`;
}
function mostrarPreguntaCrimen(i){
  if(i>=preguntasCrimen.length){return finDelJuego(false);}
  pistaIndex=i;
  const p=preguntasCrimen[i];
  let btns=Object.keys(p.opciones).map(k=>
    `<button onclick="manejarRespuestaCrimen('${k}',${i})">${k}: ${p.opciones[k]}</button>`).join('<br>');
  document.getElementById('game-area').innerHTML=`
    <h2>Pista ${i+1}: ${p.tipo}</h2>
    <div class="pregunta"><p>${p.pregunta}</p>${btns}</div>`;
  actualizarStatus();
}
function obtenerNuevoCastigo(){
  const disponibles=bancoCastigos.filter(c=>!castigosUsados.includes(c.id));
  const castigo=disponibles[Math.floor(Math.random()*disponibles.length)];
  castigosUsados.push(castigo.id);
  return castigo;
}
function mostrarCastigo(c){
  let btns=Object.keys(c.opciones).map(k=>
    `<button onclick="manejarRespuestaCastigo('${k}')">${k}: ${c.opciones[k]}</button>`).join('<br>');
  let comodinBtn=comodinesUsados[c.comodinRequerido]?'':`<button class="comodin" onclick="usarComodin('${c.comodinRequerido}')">Usar comod√≠n: ${comodinesMapa[c.comodinRequerido]}</button>`;
  document.getElementById('game-area').innerHTML=`
    <h2>Castigo Econ√≥mico (${c.tipo})</h2>
    <div class="error"><p>${c.pregunta}</p>${btns}${comodinBtn}</div>`;
  castigoActual=c;
}
function manejarRespuestaCrimen(resp,i){
  const p=preguntasCrimen[i];
  if(resp===p.respuestaCorrecta){
    pistasCrimen[p.clave]=p.valor;
    preguntasCrimenRespondidas++;
    document.getElementById('output').innerHTML="‚úÖ Correcto";
    mostrarPreguntaCrimen(i+1);
  }else{
    const castigo=obtenerNuevoCastigo();
    document.getElementById('output').innerHTML="‚ùå Incorrecto";
    mostrarCastigo(castigo);
  }
}
function manejarRespuestaCastigo(resp){
  if(resp===castigoActual.respuestaCorrecta){
    document.getElementById('output').innerHTML="‚úÖ Castigo superado";
    mostrarPreguntaCrimen(pistaIndex+1);
  }else{
    document.getElementById('output').innerHTML="üíÄ Fallaste definitivamente.";
    finDelJuego(true);
  }
}
function usarComodin(nombre){
  if(comodinesUsados[nombre])return;
  comodinesUsados[nombre]=true;
  document.getElementById('output').innerHTML=`üß† Usaste el comod√≠n: ${comodinesMapa[nombre]}`;
}
function finDelJuego(derrota){
  document.getElementById('game-area').innerHTML=derrota?
    `<h2>üíÄ DERROTA</h2><p>El equilibrio te venci√≥.</p><button onclick="mostrarHistoria()">Reintentar</button>`:
    `<h2>üèÜ VICTORIA</h2><p>Resolviste el misterio: ${pistasCrimen.ASESINO}, ${pistasCrimen.ARMA}, ${pistasCrimen.LUGAR}, ${pistasCrimen.MOVIL}.</p>
     <button onclick="mostrarHistoria()">Jugar de nuevo</button>`;
}
mostrarHistoria();
</script>
</body>
</html>

