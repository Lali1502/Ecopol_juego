<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLUE: El Misterio del Equilibrio Roto (RETO FINAL)</title>
<style>
body {
  font-family: 'Georgia', serif;
  background-color: #0b0b12;
  background-image: url('https://i.imgur.com/fjlVjDR.jpg');
  background-size: cover;
  background-position: center;
  color: #f8f8f8;
  margin: 0;
  padding: 0;
  text-shadow: 1px 1px 4px #000;
}
.container {
  max-width: 850px;
  margin: 60px auto;
  background: rgba(15, 15, 25, 0.9);
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 0 25px rgba(255, 140, 0, 0.5);
  min-height: 500px;
}
h1, h2, h3 {
  color: #ff7518;
  text-shadow: 0 0 8px #ffcc00;
  font-weight: bold;
  border-bottom: 2px solid #ffcc00;
  padding-bottom: 10px;
}
button {
  padding: 15px 30px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background-color: #ffcc00;
  color: #222;
  font-weight: bold;
  font-size: 16px;
  margin-top: 15px;
  transition: all 0.3s ease;
}
button:hover {
  background-color: #ffa500;
  transform: scale(1.05);
  box-shadow: 0 0 10px #ffcc00;
}
button.comodin {
  background-color: #4b0082;
  color: white;
}
button.comodin:hover {
  background-color: #6a0dad;
}
.inicio-historia {
  text-align: center;
  padding: 60px 20px;
  background-image: url('https://i.imgur.com/zXgQvZK.jpg');
  background-size: cover;
  background-position: center;
  border-radius: 10px;
  color: #fff;
  text-shadow: 2px 2px 6px #000;
}
.pregunta, .error, .status {
  margin-bottom: 20px;
  padding: 15px;
  border-radius: 5px;
}
.pregunta {
  background: rgba(255, 165, 0, 0.2);
  border: 1px solid #ffcc80;
}
.error {
  background: rgba(139, 0, 0, 0.6);
  border: 1px solid #ff4d4d;
}
#output {
  margin-top: 20px;
  padding: 15px;
  background: rgba(40, 40, 60, 0.8);
  border-radius: 5px;
  white-space: pre-wrap;
  color: #ffcc80;
  font-weight: bold;
}
ul {
  list-style: none;
  padding: 0;
}
li {
  margin: 5px 0;
  font-weight: bold;
}
</style>
</head>
<body>
<div class="container">
  <div id="status"></div>
  <div id="game-area"></div>
  <div id="output"></div>
</div>

<script>
let comodinesUsados = { smith:false, keynes:false, friedman:false };
let comodinesMapa = {
  'smith':'Adam Smith (Micro)',
  'keynes':'J.M. Keynes (Fiscal)',
  'friedman':'M. Friedman (Monetaria)'
};
let pistasCrimen = {};
let preguntasCrimenRespondidas = 0;
let castigosUsados = [];
let castigoActual = null;
let pistaIndex = 0;
const sospechosos = {
  A:'Dr. Joseph A. Schumpeter (Desenvolvimiento)',
  B:'Profesor Allyn A. Young (Rendimientos)'
};
const preguntasCrimen = [
  { id:'P1', tipo:'Asesino', pregunta:"Se encontr√≥ un texto de la v√≠ctima ridiculizando el desequilibrio cr√≥nico. ¬øA qui√©n incrimina?",
    opciones:{A:sospechosos.A, B:sospechosos.B}, respuestaCorrecta:'B', clave:'ASESINO', valor:'Profesor Allyn A. Young' },
  { id:'P2', tipo:'Arma', pregunta:"La v√≠ctima fue hallada con un gr√°fico de retornos decrecientes. ¬øQu√© representa el arma?",
    opciones:{A:'Competencia perfecta', B:'Rendimientos crecientes'}, respuestaCorrecta:'B', clave:'ARMA', valor:'Rendimientos crecientes' },
  { id:'P3', tipo:'Lugar', pregunta:"El crimen ocurri√≥ donde el equilibrio general no se sosten√≠a. ¬øD√≥nde fue?",
    opciones:{A:'Mercado cerrado', B:'Sistema din√°mico en expansi√≥n'}, respuestaCorrecta:'B', clave:'LUGAR', valor:'Sistema din√°mico en expansi√≥n' },
  { id:'P4', tipo:'M√≥vil', pregunta:"¬øCu√°l fue el motivo del crimen?",
    opciones:{A:'Defensa del equilibrio est√°tico', B:'Progreso econ√≥mico'}, respuestaCorrecta:'B', clave:'MOVIL', valor:'Progreso econ√≥mico' }
];
const bancoCastigos = [
  { id:'C1', tipo:'Microeconom√≠a', pregunta:"¬øQu√© mide la pendiente de la curva de indiferencia?",
    opciones:{E1:'Tasa Marginal de Sustituci√≥n',E2:'Precio Relativo'}, respuestaCorrecta:'E1', comodinRequerido:'smith' },
  { id:'C2', tipo:'Macroeconom√≠a Fiscal', pregunta:"¬øQu√© ocurre si el gasto p√∫blico aumenta con ahorro constante?",
    opciones:{E1:'El ingreso sube',E2:'El ingreso baja'}, respuestaCorrecta:'E1', comodinRequerido:'keynes' },
  { id:'C3', tipo:'Monetaria', pregunta:"¬øQu√© plantea Friedman sobre la inflaci√≥n?",
    opciones:{E1:'Es un fen√≥meno fiscal',E2:'Es siempre y en todo lugar un fen√≥meno monetario'}, respuestaCorrecta:'E2', comodinRequerido:'friedman' }
];
function mostrarHistoria(){
  document.getElementById('game-area').innerHTML=`
    <div class="inicio-historia">
      <h1><b>CLUE: El Misterio del Equilibrio Roto</b></h1>
      <p><em>En la Mansi√≥n de la Econom√≠a, el Dr. Equilibrio ha sido asesinado.</em></p>
      <p><b>Resuelve las pistas y descubre al culpable entre:</b></p>
      <ul>
        <li>${sospechosos.A}</li>
        <li>${sospechosos.B}</li>
      </ul>
      <button onclick="iniciarJuego()">Iniciar Investigaci√≥n</button>
    </div>`;
  document.getElementById('status').innerHTML='';
  document.getElementById('output').innerHTML='';
}
function iniciarJuego(){ mostrarPreguntaCrimen(0); }
function actualizarStatus(){
  const disp=Object.keys(comodinesUsados).filter(c=>!comodinesUsados[c])
    .map(c=>`<span style="color:#ffcc00"><b>${comodinesMapa[c]}</b></span>`).join(', ')||'Agotados';
  const pistas=Object.entries(pistasCrimen).map(([k,v])=>`<b>${k}</b>: ${v}`).join('; ')||'Ninguna';
  document.getElementById('status').innerHTML=
    `<h3>Estado</h3><p>Pistas: ${preguntasCrimenRespondidas}/${preguntasCrimen.length}</p>
     <p>${pistas}</p><p>Comodines: ${disp}</p>`;
}
function mostrarPreguntaCrimen(i){
  if(i>=preguntasCrimen.length){return finDelJuego(false);}
  pistaIndex=i;
  const p=preguntasCrimen[i];
  let btns=Object.keys(p.opciones).map(k=>
    `<button onclick="manejarRespuestaCrimen('${k}',${i})">${k}: ${p.opciones[k]}</button>`).join('<br>');
  document.getElementById('game-area').innerHTML=`
    <h2>Pista ${i+1}: ${p.tipo}</h2>
    <div class="pregunta"><p>${p.pregunta}</p>${btns}</div>`;
  actualizarStatus();
}
function obtenerNuevoCastigo(){
  const disponibles=bancoCastigos.filter(c=>!castigosUsados.includes(c.id));
  const castigo=disponibles[Math.floor(Math.random()*disponibles.length)];
  castigosUsados.push(castigo.id);
  return castigo;
}
function mostrarCastigo(c){
  let btns=Object.keys(c.opciones).map(k=>
    `<button onclick="manejarRespuestaCastigo('${k}')">${k}: ${c.opciones[k]}</button>`).join('<br>');
  let comodinBtn=comodinesUsados[c.comodinRequerido]?'':`<button class="comodin" onclick="usarComodin('${c.comodinRequerido}')">Usar comod√≠n: ${comodinesMapa[c.comodinRequerido]}</button>`;
  document.getElementById('game-area').innerHTML=`
    <h2>Castigo Econ√≥mico (${c.tipo})</h2>
    <div class="error"><p>${c.pregunta}</p>${btns}${comodinBtn}</div>`;
  castigoActual=c;
}
function manejarRespuestaCrimen(resp,i){
  const p=preguntasCrimen[i];
  if(resp===p.respuestaCorrecta){
    pistasCrimen[p.clave]=p.valor;
    preguntasCrimenRespondidas++;
    document.getElementById('output').innerHTML="‚úÖ <b>Correcto</b>";
    mostrarPreguntaCrimen(i+1);
  }else{
    const castigo=obtenerNuevoCastigo();
    document.getElementById('output').innerHTML="‚ùå <b>Incorrecto</b>";
    mostrarCastigo(castigo);
  }
}
function manejarRespuestaCastigo(resp){
  if(resp===castigoActual.respuestaCorrecta){
    document.getElementById('output').innerHTML="‚úÖ <b>Castigo superado</b>";
    mostrarPreguntaCrimen(pistaIndex+1);
  }else{
    document.getElementById('output').innerHTML="üíÄ <b>Fallaste definitivamente.</b>";
    finDelJuego(true);
  }
}
function usarComodin(nombre){
  if(comodinesUsados[nombre])return;
  comodinesUsados[nombre]=true;
  document.getElementById('output').innerHTML=`üß† <b>Usaste el comod√≠n:</b> ${comodinesMapa[nombre]}`;
}
function finDelJuego(derrota){
  document.getElementById('game-area').innerHTML=derrota?
    `<h2>üíÄ <b>DERROTA</b></h2><p>El equilibrio te venci√≥.</p><button onclick="mostrarHistoria()">Reintentar</button>`:
    `<h2>üèÜ <b>VICTORIA</b></h2><p>Resolviste el misterio: ${pistasCrimen.ASESINO}, ${pistasCrimen.ARMA}, ${pistasCrimen.LUGAR}, ${pistasCrimen.MOVIL}.</p>
     <button onclick="mostrarHistoria()">Jugar de nuevo</button>`;
}
mostrarHistoria();
</script>
</body>
</html>